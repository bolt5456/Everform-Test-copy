{% comment %}
  Homepage Projects Showcase
{% endcomment %}

<section class="home-projects section">
  <div class="container">
    <div class="home-projects__header">
      <h2>{{ section.settings.heading }}</h2>
      {% if section.settings.subheading != blank %}
        <p class="text-secondary">{{ section.settings.subheading }}</p>
      {% endif %}
    </div>

    <div class="home-projects__track">
      {% for block in section.blocks %}
        <article class="home-projects__card" {{ block.shopify_attributes }}>
          <div class="home-projects__image-wrapper">
            {% if block.settings.image != blank %}
              <img
                src="{{ block.settings.image | image_url: width: 800 }}"
                srcset="
                  {{ block.settings.image | image_url: width: 400 }} 400w,
                  {{ block.settings.image | image_url: width: 800 }} 800w,
                  {{ block.settings.image | image_url: width: 1200 }} 1200w
                "
                sizes="(min-width: 1024px) 33vw, 80vw"
                alt="{{ block.settings.image_alt | default: block.settings.title | escape }}"
                loading="lazy"
                class="home-projects__image"
                width="800"
                height="600"
              >
            {% else %}
              {{ 'image' | placeholder_svg_tag: 'home-projects__placeholder' }}
            {% endif %}
          </div>
          <div class="home-projects__content">
            {% if block.settings.tag != blank %}
              <div class="badge badge--primary">{{ block.settings.tag }}</div>
            {% endif %}
            <h3 class="home-projects__title">{{ block.settings.title }}</h3>
            {% if block.settings.text != blank %}
              <p class="small text-secondary">{{ block.settings.text }}</p>
            {% endif %}
            {% if block.settings.link_text != blank and block.settings.link_url != blank %}
              <a href="{{ block.settings.link_url }}" class="btn btn--tertiary">
                {{ block.settings.link_text }}
              </a>
            {% endif %}
          </div>
        </article>
      {% endfor %}
    </div>
  </div>
</section>

<style>
  .home-projects__header {
    max-width: 60ch;
    margin-bottom: var(--spacing-2xl);
  }

  .home-projects__track {
    display: grid;
    grid-template-columns: 1fr;
    gap: var(--spacing-xl);
  }

  .home-projects__card {
    border: 1px solid var(--color-border);
    background-color: var(--color-white);
  }

  .home-projects__image-wrapper {
    background-color: var(--color-off-white);
    overflow: hidden;
  }

  .home-projects__image {
    width: 100%;
    height: auto;
    display: block;
  }

  .home-projects__content {
    padding: var(--spacing-lg);
    display: grid;
    gap: var(--spacing-sm);
  }

  @media (min-width: 768px) {
    .home-projects__track {
      grid-template-columns: repeat(2, 1fr);
    }
  }

  @media (min-width: 1024px) {
    .home-projects__track {
      grid-template-columns: repeat(3, 1fr);
    }
  }
</style>

{% schema %}
{
  "name": "Home Projects",
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Recent projects"
    },
    {
      "type": "textarea",
      "id": "subheading",
      "label": "Subheading",
      "default": "Installed solutions across commercial, public, and residential environments."
    }
  ],
  "blocks": [
    {
      "type": "project",
      "name": "Project",
      "settings": [
        {
          "type": "image_picker",
          "id": "image",
          "label": "Project Image"
        },
        {
          "type": "text",
          "id": "image_alt",
          "label": "Image Alt Text",
          "default": "Everform installation project"
        },
        {
          "type": "text",
          "id": "tag",
          "label": "Tag",
          "default": "Corten Planters"
        },
        {
          "type": "text",
          "id": "title",
          "label": "Title",
          "default": "Retail promenade planters"
        },
        {
          "type": "textarea",
          "id": "text",
          "label": "Text",
          "default": "Custom corten planters delivered with integrated irrigation and concealed fixing."
        },
        {
          "type": "text",
          "id": "link_text",
          "label": "Link Text",
          "default": "View project"
        },
        {
          "type": "url",
          "id": "link_url",
          "label": "Link URL"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Home Projects",
      "blocks": [
        { "type": "project" },
        { "type": "project" },
        { "type": "project" }
      ]
    }
  ]
}
{% endschema %}
